<div class="flex w-full mx-auto gap-4 mt-4">
  @for (status of taskStatus; track $index) {
  <div
    class="relative bg-zinc-900 w-full rounded-sm p-4 flex-1 transition-colors duration-300"
    (dragover)="onDragOver($event, status, null)"
    (drop)="onDrop($event, status)"
  >
    <h3 class="mb-4 text-neutral-400">{{ status }}</h3>

    <div>
      @for (task of getTasksByStatus(status); track task.id) {

      <!-- Drop indicator BEFORE task -->
      <div
        *ngIf="
          dragOverStatus === status && dragOverTaskId === task.id && dragOverPosition === 'before'
        "
        class="h-0.5 bg-blue-500 rounded my-1 transition-all duration-150"
      ></div>

      <div
        class="flex items-end justify-between px-2 py-1 bg-zinc-800 rounded-sm my-1 shadow-md cursor-move"
        draggable="true"
        (dragstart)="onDragStart($event, task)"
        (dragend)="onDragEnd($event)"
        (dragover)="onDragOver($event, status, task.id)"
      >
        <div class="flex flex-col gap-2">
          <h4>{{ task.title }}</h4>
          <p>{{ task.description }}</p>
          <p>{{ task.id }}</p>
        </div>
        <p>{{ task.assignee }}</p>
      </div>

      <!-- Drop indicator AFTER task -->
      <div
        *ngIf="
          dragOverStatus === status && dragOverTaskId === task.id && dragOverPosition === 'after'
        "
        class="h-0.5 bg-blue-500 rounded my-1 transition-all duration-150"
      ></div>

      }

      <!-- Drop indicator at END of column -->
      <div
        *ngIf="dragOverStatus === status && dragOverTaskId === null"
        class="h-0.5 bg-blue-500 rounded my-1 transition-all duration-150"
      ></div>
    </div>
  </div>
  }
</div>
